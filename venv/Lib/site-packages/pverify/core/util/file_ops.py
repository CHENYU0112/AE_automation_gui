from __future__ import annotations

from pverify.core.env import IS_WIN


def prevent_filehandle_inherit(fileno):
    if IS_WIN:
        from msvcrt import get_osfhandle

        from win32api import SetHandleInformation
        from win32con import HANDLE_FLAG_INHERIT

        SetHandleInformation(get_osfhandle(fileno), HANDLE_FLAG_INHERIT, 0)

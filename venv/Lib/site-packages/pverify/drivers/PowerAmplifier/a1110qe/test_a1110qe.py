from __future__ import annotations

from pverify.drivers.PowerAmplifier.a1110qe.a1110qe import A1110QE

SIMULATION_MODE = True

amp = A1110QE()
amp.Initialize(ResourceName="COM5", IdQuery=True, OptionString=f"simulate={SIMULATION_MODE}")
if not SIMULATION_MODE:
    print(f"device id:\t{amp.get_device_id()}")
    print(f"fw version:\t{amp.get_firmware_version()}")
    print(f"device state:\n{amp.get_device_state()}")

amp.set_amplifier_off()
amp.set_amplifier_mode("curr")
amp.set_current_limit(5)

amp.Close()

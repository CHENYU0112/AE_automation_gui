from __future__ import annotations

from pathlib import Path

import numpy as np

from dlh5 import DLH5

with DLH5(Path("examplefile.dlh5"), "w") as f:
    f.file_add_metadata("operator", "someone")
    f.file_add_metadata("project", "something")
    f.file_add_metadata("revision", 3)

    for i in range(10):
        f.group_add_operating_condition(i, "paramA", i + 1, unit="V")
        f.group_add_operating_condition(i, "paramB", i + 2, unit="A")

        f.group_add_metadata(i, "metaA", i + 4)
        f.group_add_metadata(i, "metaB", i + 5)
        f.group_add_metadata(i, "metaC", f"STRING {i}")

        f.group_add_numeric_channel(i, "mynumber", 1.1 * i)
        f.group_add_string_channel(i, "mystring", f"counting to {i}")
        f.group_add_file_channel(i, "mylogs", ("somepath.txt", b"bla blubb"))
        # Waveform with uniformly-sampled time vector
        f.group_add_waveform_channel(i, "waveform1", y_data=np.array([1, 2, 3]) + i, x_data=None)
        # Waveform with uneven-sampled time vector
        f.group_add_waveform_channel(i, "waveform2", y_data=np.array([1, 2, 3]) + i, x_data=[1, 5, 10])
        f.group_add_array_channel(i, "array", np.array([1, 2, 3]))
